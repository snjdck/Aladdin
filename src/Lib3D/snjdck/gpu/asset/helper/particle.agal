@particle2d

vt0 = va0
vt0.xy -= vc127.xx

vt1.x = dp4: vt0, vc3		#local matrix
vt1.y = dp4: vt0, vc4

vt0.xy = vt1.xy

vt1.x = dp4: vt0, vc1		#world matrix
vt1.y = dp4: vt0, vc2

vt0.xy = vt1.xy * vc0.xy	#screen matrix
vt0.xy += vc0.zw

op = vt0
v0 = va0

ft0 = tex: v0, fs0<2d,linear,clamp>
oc = ft0 * fc0